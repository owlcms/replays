# HTTP server port
port = 8091

# address of owlcms.  a scan of the local network will be done if undefined or unreachable.
owlcms = ""

# Platform identifier if more than one platform detected
platform = "A"

# Directory to store video files (can be an absolute path to store on a different drive)
videoDir = 'videos'

# Video processing options
# recode = true to re-encode the stream, false to simply copy
recode = false 

# FFmpeg logging - set to true to create timestamped log files for ffmpeg output
logFfmpeg = false


# Use the `input_params` and `output_params` to manage your FFmpeg flags.
#
# A note on FFmpeg command order:
# [global flags] [input flags] -i <input_source> [output flags] <output_file>
#
# This configuration is designed to generate the command in the correct order.


# =======================================================
# Windows Camera Configurations
# =======================================================

[windows1]
    enabled = true
    camera = 'Logitech Webcam C930e'
    format = 'dshow'
    size = "1280x720"
    fps = 30
    
    # Input parameters for this camera.
    # Put flags that must come before `-i <camera name>` here.
    inputParameters = '-rtbufsize 512M -thread_queue_size 4096'
    
    # Output parameters software encoder
    # Put flags that must come after `-i <camera name>` here.
    outputParameters = '-c:v libx264 -vf "format=yuv420p" -preset medium'
    
    # Recode = false to simply copy the streams from the camera's native format.
    recode = false


# The fixed configuration for the Hagibis camera.
# This fixes the "real-time buffer" problem.
[windows2]
    enabled = true
    camera = 'Hagibis'
    format = 'dshow'
    size = "1920x1080"
    fps = 60
    
    # These input parameters solve the real-time buffer too full error.
    # They must be on the input side (before -i).
    inputParameters = '-rtbufsize 512M -thread_queue_size 4096'
    
    # These are output parameters for the AMD hardware encoder.
    # Note: `-quality speed` is the equivalent of `-preset ultrafast` for hardware encoders.
    outputParameters = '-c:v h264_amf -quality speed -b:v 5M -an'

    # Recode = true to re-encode using the specified hardware encoder.
    recode = true


# =======================================================
# Linux Camera Configurations
# =======================================================

[linux1]
    enabled = true
    camera = '/dev/video0'
    format = 'v4l2'
    size = "1280x720"
    fps = 30

    # Input parameters for buffer management
    inputParameters = '-rtbufsize 512M -thread_queue_size 4096'

    # Output parameters for a software encoder on Linux (e.g., for compatibility).
    output_params = '-c:v libx264 -preset ultrafast -vf "format=yuv420p" -b:v 5M -an'
    
    # Recode = false when we produce x.264 or h.264
    recode = false


# A disabled example for another Linux camera.
[linux2]
    enabled = false
    camera = '/dev/video2'
    format = 'v4l2'
    size = "1280x720"
    fps = 30
    inputParameters = '-rtbufsize 512M -thread_queue_size 4096'
    output_params = '-c:v libx264 -vf "format=yuv420p" -preset medium'
    
    # Recode = false to simply copy.
    recode = false